[% MACRO estim(var, rse, fixed) GET var ? (fixed ? "$var fixed" : (rse ? "$var<br/>($rse)" : "$var<br/>(--)")) : "--" %]
[% MACRO formatpval(p) GET p ? (p < 0.001 ? "< 0.001" : p) : "--" %]
<html>
    <head>
        <title>Autogenerated Table</title>

    <style type="text/css">
        body {
            font-family: "Times New Roman", Times, serif;
            font-size: 10pt;
        }
        p {
            margin-top: 0;
            margin-bottom: 0;
        }
        th, td {
            border: 1pt solid black;
            text-align: center;
            padding: 0.05in;
            margin: 0px;
        }
        table {
            font-family: "Times New Roman", Times, serif;
            font-size: 10pt;
            border-collapse: collapse;
            border: 2pt solid black;
            padding: 0px;
            margin: 0px;
        }
        th {
            border-top: 0;
            background-color: #d0d0d0;
        }
        .thicktop {
            border-top: 2pt solid black;
        }
    </style>
    </head>
    <body>
        <table>
            <tr>
                <th>Run name</th>
                <th>Reference</th>
                <th>Description</th>
                <th>No. Indiv.</th>
                <th>No. Obs.</th>
                <th>df</th>
                <th>&Delta;MOF</th>
                <th>&Delta;df</th>
                <th>P-Value</th>
                <th>Typical<br />CL<br />(L/h)</th>
            </tr>
            [% FOREACH m IN models %]
            <tr>
                <td>[% m.name OR "--" %]</td>
                <td>[% (m.referencemodel == m.name ? "--" : m.referencemodel) OR "--" %]</td>
                <td>[% m.description OR "--" %]</td>
                <td>[% m.Tot_N OR "--" %]</td>
                <td>[% m.Tot_Obs OR "--" %]</td>
                <td>[% m.Obj %][% IF m.Min == 'PROBLEMS' %]<sup>[% ss_problems %]</sup>[% ELSIF m.Min != 'SUCCESSFUL' %]<sup>[% ss_noconverge %]</sup>[% ELSIF m.Cov != 'OK' %]<sup>[% ss_nocovstep %]</sup>[% END %]</td>
                <td>[% m.DF OR "--" %]</td>
                <td>[% m.dMOF OR "--" %]</td>
                <td>[% m.dDF OR "--" %]</td>
                <td>[% formatpval(m.pvalue) OR "--" %]</td>
                <td>[% estim(m.CL, m.rse_CL, m.fixed_CL) %]</td>
            </tr>
            [% END %]
        </table>
        [% IF any_noconverge %]
        <p><sup>[% ss_noconverge %]</sup> Model did not converge.</p>
        [% END %]
        [% IF any_problems %]
        <p><sup>[% ss_problems %]</sup> Problems with minimization.</p>
        [% END %]
        [% IF any_nocovstep %]
        </p><sup>[% ss_nocovstep %]</sup> Model converged but no covariance step.</p>
        [% END %]
    </body>
</html>


